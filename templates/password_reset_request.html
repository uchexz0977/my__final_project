{% extends 'base.html' %} {% block title %}Password Reset{% endblock %} {% block
content %}

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";

  import {
    getAuth,
    sendPasswordResetEmail,
  } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAHtMKSJmPonfI-1GK8g6PMQ9BE405BYW4",
    authDomain: "quizzlearnapp.firebaseapp.com",
    projectId: "quizzlearnapp",
    storageBucket: "quizzlearnapp.appspot.com",
    messagingSenderId: "387306258293",
    appId: "1:387306258293:web:e34b2651b9523a9ba21d3c",
  };

  const app = initializeApp(firebaseConfig);

  const auth = getAuth(app);

  window.sendPasswordReset = function () {
    var email = document.getElementById("email").value;
    sendPasswordResetEmail(auth, email)
      .then(function () {
        var messageElement = document.getElementById("resetMessage");
        messageElement.textContent =
          "Password reset email sent. Please check your inbox.";
        messageElement.style.color = "green";

        setTimeout(function () {
          window.location.href = "/login";
        }, 5000);
      })
      .catch(function (error) {
        document.getElementById("resetMessage").textContent =
          "Error sending password reset email: " + error.message;
        document.getElementById("resetMessage").style.color = "red";
      });
  };
</script>

<div class="container">
  <h2>Reset Password</h2>
  <div class="form-group">
    <label for="email">Email address</label>
    <input type="email" id="email" class="form-control" required />
  </div>
  <button onclick="sendPasswordReset()" class="btn btn-primary">
    Request Password Reset
  </button>
  <div id="resetMessage" class="mt-3"></div>
</div>

{% endblock %}
